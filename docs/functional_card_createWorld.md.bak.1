# Карточка функционала - Функция createWorld

## Основная информация
- **Название**: createWorld.js
- **Тип**: Функция создания мира (проекта)
- **Путь**: creators/createWorld.js
- **Версия**: 1.1.0
- **Статус**: Активен

## Описание функционала
Функция автоматически создает новый мир/проект с полной структурой папок, файлов настроек и шаблонов. Включает создание папки для теговых картинок и настройку всех необходимых компонентов для литературного проекта.

## Параметры функции

### Входные параметры
| Параметр | Тип | Описание | Обязательный |
|----------|-----|----------|--------------|
| `plugin` | Object | Экземпляр плагина LiteraryTemplatesPlugin | Да |
| `startPath` | string | Путь для создания проекта | Нет (по умолчанию: '') |

### Запрашиваемые параметры
| Параметр | Тип | Описание | Пример |
|----------|-----|----------|---------|
| `projectName` | string | Название проекта | "Мой мир" |
| `worldType` | string | Тип мира | "fantasy", "scifi", "historical" |
| `genre` | string | Жанр произведения | "Фэнтези" |
| `setting` | string | Сеттинг мира | "Средневековая Европа" |
| `era` | string | Эпоха | "Средние века" |
| `description` | string | Описание мира | "Мир магии и приключений..." |
| `races` | array | Расы и народы | ["Люди", "Эльфы", "Гномы"] |
| `genders` | array | Полы | ["Мужской", "Женский"] |
| `statuses` | array | Социальные статусы | ["Благородный", "Простолюдин"] |
| `locationTypes` | array | Типы локаций | ["Город", "Деревня", "Замок"] |
| `climates` | array | Климатические зоны | ["Умеренный", "Холодный"] |
| `peopleFeatures` | string | Особенности народов | "Эльфы долгоживущие..." |
| `mainTheme` | string | Главная тема | "Борьба добра и зла" |
| `secondaryThemes` | array | Второстепенные темы | ["Любовь", "Дружба"] |

## Создаваемая структура

### Папки
| Папка | Путь | Назначение |
|-------|------|------------|
| Основная папка проекта | `{startPath}/{safeName}/` | Корневая папка проекта |
| Теговые картинки | `{startPath}/{safeName}/Теговые_картинки/` | Изображения для типов сущностей |

### Файлы
| Файл | Путь | Шаблон | Назначение |
|------|------|--------|------------|
| Основной файл проекта | `{projectName}.md` | Создать_проект | Главная страница проекта |
| Настройки мира | `Настройки_мира.md` | Настройки_мира | Описание мира |
| JSON настроек | `Настройки_мира.json` | - | Машиночитаемые настройки |
| Редактор настроек | `Редактор_настроек.md` | Редактор_настроек | Ссылка на редактор |
| Сюжетные линии | `Сюжетные_линии.md` | Сюжетные_линии | Сюжетные арки |
| Фракции | `Фракции.md` | Фракции | Организации мира |
| Государства | `Государства.md` | Государства | Политические образования |

## Шаблоны типов миров

### Фэнтези (fantasy)
- **Расы**: Люди, Эльфы, Гномы, Орки, Хоббиты
- **Полы**: Мужской, Женский, Другой
- **Статусы**: Благородный, Простолюдин, Раб, Священник, Маг
- **Локации**: Город, Деревня, Замок, Порт, Храм, Башня
- **Климаты**: Умеренный, Холодный, Жаркий, Тропический, Пустынный

### Научная фантастика (scifi)
- **Расы**: Люди, Инопланетяне, Андроиды, Кибернетики
- **Полы**: Мужской, Женский, Нейтральный
- **Статусы**: Гражданин, Иммигрант, Преступник, Чиновник
- **Локации**: Космическая станция, Планета, Корабль, Колония
- **Климаты**: Земной, Пустынный, Ледяной, Токсичный

### Исторический (historical)
- **Расы**: Люди
- **Полы**: Мужской, Женский
- **Статусы**: Король, Дворянин, Рыцарь, Крестьянин, Купец, Священник
- **Локации**: Город, Деревня, Замок, Порт, Храм, Крепость
- **Климаты**: Умеренный, Холодный, Жаркий, Средиземноморский

### Современный (modern)
- **Расы**: Люди
- **Полы**: Мужской, Женский, Другой
- **Статусы**: Гражданин, Чиновник, Бизнесмен, Рабочий, Студент
- **Локации**: Город, Деревня, Офис, Торговый центр, Университет
- **Климаты**: Умеренный, Холодный, Жаркий, Тропический

### Пользовательский (custom)
- **Расы**: Люди
- **Полы**: Мужской, Женский
- **Статусы**: Обычный, Особый
- **Локации**: Локация
- **Климаты**: Климат

## Автоматические действия

### Создание папок
1. Основная папка проекта
2. Папка "Теговые_картинки" для изображений

### Генерация файлов
1. Создание всех файлов из шаблонов
2. Заполнение JSON настроек
3. Обновление файлов с данными пользователя

### Открытие проекта
- Автоматическое открытие основного файла проекта
- Уведомление об успешном создании

## Интеграция с системой

### Связь с шаблонами
- Использует систему шаблонов плагина
- Применяет условную логику в шаблонах
- Поддерживает плейсхолдеры {{...}}

### Связь с модальными окнами
- Интеграция с WorldSettingsModal для редактирования настроек
- Поддержка obsidian:// протокола для редактирования

### Связь с другими функциями
- Базовая функция для создания всех сущностей мира
- Интеграция с системой логирования плагина

## Обработка ошибок

### Проверки
- Валидация названия проекта
- Проверка существования папок
- Обработка ошибок создания файлов

### Логирование
- Детальное логирование всех этапов
- Запись ошибок в лог плагина
- Уведомления пользователя

## История изменений

### [2025-01-09] - Добавление папки теговых картинок
- Добавлено автоматическое создание папки "Теговые_картинки"
- Улучшена структура создаваемых папок
- Добавлено логирование создания папки

### [2024-12-19] - Создание функции
- Базовая функциональность создания мира
- Система шаблонов типов миров
- Интеграция с системой шаблонов плагина

## Зависимости
- **Плагин**: Literary Templates
- **Шаблоны**: Создать_проект, Настройки_мира, Редактор_настроек, Сюжетные_линии, Фракции, Государства
- **Функции**: safeCreateFile, readTemplateFile, applyTemplate
- **Система**: Логирование плагина, модальные окна

## Технические особенности
- Поддержка кириллицы в UTF-8
- Автоматическое создание папок и файлов
- Интеграция с Obsidian API
- Система шаблонов с условной логикой
- JSON конфигурация для машиночитаемых настроек
- Поддержка obsidian:// протокола
