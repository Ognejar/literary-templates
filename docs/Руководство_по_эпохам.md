# Руководство по работе с эпохами и произведениями

## Введение

Система эпох позволяет создавать несколько произведений в одном мире, каждое в своем временном контексте. Это решает проблему логических противоречий между произведениями, происходящими в разные периоды времени.

## Основные концепции

### Эпоха
Временной период в мире с определенными характеристиками:
- Технологический уровень
- Социальная структура  
- Политическая система
- Культурные особенности

### Произведение
Отдельное литературное произведение, происходящее в определенной эпохе:
- Имеет свой временной контекст
- Использует общий лор мира
- Изолировано от других произведений

### Временной контекст
Связь между произведением и эпохой:
- Определяет год действия
- Описывает события того времени
- Фильтрует доступные сущности

## Как начать работу

### 1. Создание первой эпохи

1. Откройте командную палитру (Ctrl+Shift+P)
2. Найдите команду "Выбрать эпоху"
3. Нажмите "Создать новую эпоху"
4. Заполните форму:
   - **ID:** краткий идентификатор (например, `early_medieval`)
   - **Название:** полное название эпохи
   - **Начальный год:** год начала эпохи
   - **Конечный год:** год окончания эпохи
   - **Описание:** характеристика эпохи
   - **Активная:** отметьте, если это основная эпоха

### 2. Создание произведения

1. Откройте командную палитру
2. Найдите команду "Создать произведение"
3. Заполните форму:
   - **Название:** название произведения
   - **ID:** краткий идентификатор
   - **Описание:** краткое описание
   - **Эпоха:** выберите эпоху из списка
   - **Год действия:** год в рамках эпохи
   - **Временной контекст:** что происходит в мире в это время

### 3. Структура создается автоматически

При создании произведения автоматически создается структура:
```
1_Рукопись/Произведения/[ID_произведения]/
├── Главы/
├── Сцены/
├── Персонажи/
├── Заметки/
└── [ID_произведения].md
```

## Работа с эпохами

### Переключение между эпохами

1. Откройте "Выбрать эпоху"
2. Выберите нужную эпоху
3. Нажмите "Выбрать"

**Важно:** При переключении эпохи все визарды и шаблоны будут использовать данные для этой эпохи.

### Редактирование эпохи

1. В списке эпох нажмите "Редактировать"
2. Измените нужные поля
3. Сохраните изменения

### Создание дополнительных эпох

Рекомендуемая структура эпох:
- **Раннее Средневековье** (1000-1300)
- **Позднее Средневековье** (1300-1500)
- **Ренессанс** (1500-1700)
- **Промышленная революция** (1700-1900)

## Работа с произведениями

### Создание контента

После создания произведения вы можете:
- Создавать главы в папке "Главы"
- Создавать сцены в папке "Сцены"
- Добавлять персонажей в папку "Персонажи"
- Вести заметки в папке "Заметки"

### Использование Dataview

В файле произведения автоматически создаются Dataview запросы:
- Список глав
- Список сцен
- Список персонажей
- Связи с миром

### Фильтрация по эпохе

Все Dataview запросы автоматически фильтруют данные по эпохе произведения.

## Версионирование сущностей

### Концепция версий

Каждая сущность (город, персонаж, фракция) может иметь несколько версий для разных эпох:

```yaml
---
name: Велюмарк
temporal_versions:
  - epoch: early_medieval
    year: 1313
    population: 5000
    description: Небольшой торговый город
  - epoch: late_medieval
    year: 1487
    population: 15000
    description: Крупный торговый центр
---
```

### Создание версий

1. Создайте сущность в одной эпохе
2. Переключитесь на другую эпоху
3. Создайте ту же сущность с новыми данными
4. Система автоматически создаст версию

## Лучшие практики

### Планирование эпох

1. **Определите временные рамки** мира
2. **Разделите на логические периоды**
3. **Опишите ключевые изменения** между эпохами
4. **Создайте базовые сущности** для каждой эпохи

### Организация произведений

1. **Используйте четкие ID** для произведений
2. **Ведите заметки** о развитии сюжета
3. **Связывайте персонажей** с локациями
4. **Отслеживайте прогресс** через задачи

### Работа с лором

1. **Создавайте общие элементы** в корне проекта
2. **Используйте версионирование** для изменяющихся сущностей
3. **Документируйте изменения** между эпохами
4. **Поддерживайте консистентность** данных

## Примеры использования

### Сценарий 1: Рассказ и роман

1. **Создайте эпоху "Раннее Средневековье"** (1000-1300)
2. **Создайте произведение "Рассказ о рыцаре"** (1313 год)
3. **Создайте эпоху "Позднее Средневековье"** (1300-1500)
4. **Создайте произведение "Роман о торговце"** (1487 год)

Теперь у вас есть два произведения в одном мире, но в разных временных контекстах.

### Сценарий 2: Развитие города

1. **В эпохе 1313** создайте город Велюмарк (население 5000)
2. **В эпохе 1487** обновите тот же город (население 15000)
3. **Система автоматически** создаст версии города

### Сценарий 3: Связи между произведениями

1. **В первом произведении** создайте персонажа-основателя династии
2. **Во втором произведении** создайте его потомка
3. **Используйте Dataview** для отслеживания связей

## Устранение неполадок

### Проблема: Эпохи не загружаются
**Решение:** Проверьте файл `_lore/timeline.json` в корне проекта

### Проблема: Произведения не создаются
**Решение:** Убедитесь, что создана хотя бы одна эпоха

### Проблема: Dataview не работает
**Решение:** Проверьте правильность путей в запросах

### Проблема: Версии сущностей не создаются
**Решение:** Убедитесь, что используете одинаковые названия

## Дополнительные возможности

### Автоматические связи

Система автоматически создает связи между:
- Произведениями и эпохами
- Сущностями и их версиями
- Персонажами и локациями

### Экспорт данных

Вы можете экспортировать:
- Список всех эпох
- Список всех произведений
- Версии конкретной сущности

### Резервное копирование

Рекомендуется регулярно копировать:
- Файл `_lore/timeline.json`
- Файл `_lore/temporal_contexts.json`
- Папку `1_Рукопись/Произведения/`

## Заключение

Система эпох и произведений позволяет эффективно работать с несколькими произведениями в одном мире, сохраняя логическую консистентность и избегая противоречий между разными временными периодами.
