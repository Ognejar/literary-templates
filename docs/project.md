## Политика работы с фракциями

- Для всех сущностей (города, деревни, провинции, замки, порты, монстры, народы, организации и др.) фракции теперь задаются свободным текстовым вводом.
- Глобальный справочник фракций не используется.
- Это позволяет указывать уникальные локальные фракции для каждой сущности (например, "фракция деда Макара" для деревни).
- При необходимости пользователь может вручную поддерживать собственный справочник или использовать автодополнение (будет реализовано в будущем).
<<<<<<< Current (Your changes)
=======

## Агент документации

- Компонент: преднастроенный агент в Cursor, обновляющий документацию по изменённым модулям.
- Артефакты: `docs/changelog.md`, `docs/tasktracker.md`, `docs/project.md`, карточки функционала.
- Шаблоны: `docs/_templates/*.md`.
- Политика подтверждений: авто для `changelog.md`/`tasktracker.md`; подтверждение для `project.md` и карточек.
- Поток:
  1) определение изменений → 2) генерация записей → 3) подтверждение чувствительных правок → 4) запись → 5) краткое резюме.

>>>>>>> Incoming (Background Agent changes)

## Правило: Чтение шаблонов из .obsidian

- Единственно верный способ читать шаблоны, лежащие в `.obsidian/plugins/literary-templates/templates`, — использовать файловый адаптер Obsidian: `app.vault.adapter.exists/read/list`.
- Доступ через `app.vault.getAbstractFileByPath` для `.obsidian` запрещён: он не гарантирует видимость скрытой папки `.obsidian` и приводит к промахам.
- Логи: любые проблемы с доступом и отсутствием файлов фиксируются только в лог (Console), без Notice-уведомлений.
- Запрещено менять этот механизм чтения без отдельного решения и явной правки документа. Если требуется иное поведение — сначала обновить этот раздел и согласовать изменение.
