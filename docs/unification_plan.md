# План унификации интерфейса визардов (ненарушающая совместимость)

Цель: выровнять UX и сократить дублирование кода в мастерах (WizardModal) без переписывания всех модалок и без изменения внешнего поведения.

## Проблема
В проекте сосуществуют две линии мастеров:
- Новая на базе EntityWizardBase (или аналогов): краткие файлы, steps, renderNavigation, прогресс.
- Старая на утилитах obsidian/../utils/modals: много кастомного кода, иной рендер и навигация.

Это ведёт к разным паттернам UI и дублированию логики (парсинг списков, нормализация имён и дат).

## Подход к унификации
Вводим тонкий фасад UI и общие хелперы данных. Существующие мастера не ломаем: 
- Можно использовать новый фасад выборочно, мигрируя по одному файлу.

## Новые модули
1) helpers/lists.js
- parseCommaList(s): string -> string[] (trim/фильтрация пустых)
- toBulleted(list): string[] -> "- item"-формат
- toWikiLinks(list): string[] -> "[[item]]" через запятую

2) helpers/strings.js
- clean(s): safe trim
- cleanName(name): безопасное имя файла (совместимо с текущей логикой)
- todayFormatted(): YYYY-MM-DD (moment, если доступен)

3) ui/adapters/ObsidianSettingAdapter.js
- Класс, использующий глобальный Setting/DOM из Obsidian: методы header, text, textarea.

4) ui/WizardUI.js
- Фасад над адаптером: header(contentEl, text), settingText(contentEl, name, get, set), settingTextArea(...), progress(contentEl, step, total), (опционально) nav() — оставляем навигацию базовому классу.

## Мягкая миграция (пример)
- creators/ReligionWizardModal.js: подключить WizardUI и заменить вызовы new Setting(...) на ui.settingText/settingTextArea.
- Логику finish(), шаблоны и пути не меняем.

## Последующие шаги (опционально)
- Постепенно переносить другие визарды на фасад, сохраняя поведение.
- При желании унифицировать расчёт projectRoot.

## Критерии успеха
- Все мастера продолжают работать как раньше.
- ReligionWizardModal визуально и функционально без регрессий.
- Повторно используемые утилиты готовы для применения в других мастерах.
