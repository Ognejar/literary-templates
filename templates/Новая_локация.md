---
type: локация
project: "{{projectName}}"
work: "{{workName}}"
created: "{{date}}"
tags: [локация{{#if tags}}, {{tags}}{{/if}}]
characters: [{{characterTags}}]
---
{{imageBlock}}

# {{locationName}}

## Краткое описание
{{shortDescription}}

## Подробности
{{description}}

## Контекст
- Проект: {{projectName}}
- Произведение: {{workName}}

## Связанные сущности
- Персонажи: {{characters}}
- Сюжетные линии: {{plotLines}}

> [!info]- Навигация
> ```dataview
> list from ""
> where contains(locations, this.file.name) and type = "сцена"
> sort chapter_num asc, scene_num asc
> ```

---
created: "{{date}}"
name: "{{name}}"
aliases: ["{{name}}"]
type: "{{type}}"
climate: "{{climate}}"
tags: [{{typeLower}}, локация, активный]
state: "{{state}}"
province: "{{province}}"
status: "{{status}}"
{{#if statusReason}}statusReason: "{{statusReason}}"{{/if}}
---

# {{name}}

**Тип:** {{type}}
**Климат:** {{climate}}
{{#if province}}**Провинция:** [[{{province}}]]{{/if}}
{{#if state}}**Государство:** [[{{state}}]]{{/if}}

## Хронология
- год:событие

## Состояние

{{#if status}}
**Статус:** {{statusLabel}}
{{/if}}
{{#if status != действует}}
**Причина:** {{statusReason}}
{{/if}}

## Описание

{{description}}

## Автоматические связи

### Обитатели

```dataview
LIST FROM #people OR #character
WHERE (
    contains(file.outlinks, [[{{name}}]]) OR
    contains(file.tags, "{{name}}") OR
    regexmatch(file.text, "#{{name}}") OR
    regexmatch(file.text, "\\[\\[{{name}}(\\||\\]\\])")
) AND file.name != this.file.name
```

## Аспекты (чек-лист)

- [ ] География (рельеф, биомы, климат)
- [ ] Гидросеть (реки, озёра, каналы, волоки)
- [ ] Ресурсы (основные/редкие)
- [ ] Инфраструктура (дороги, дамбы, водоснабжение)
- [ ] Юрисдикция (государство/провинция, право)
- [ ] Экономика (рынки, склады, торговые пути)
- [ ] Население (плотность, этносы)
- [ ] Религия (святилища, праздники)
- [ ] Конфликты и риски (экологические/политические)

### Населённые пункты

```dataview
LIST FROM #place
WHERE (
    contains(file.outlinks, [[{{name}}]]) OR
    contains(file.tags, "{{name}}") OR
    regexmatch(file.text, "#{{name}}") OR
    regexmatch(file.text, "\\[\\[{{name}}(\\||\\]\\])")
    AND (type = "Город" OR type = "Деревня")
    AND file.name != this.file.name
)
```

### Подлокации

```dataview
LIST FROM #place
WHERE (
    (contains(file.outlinks, [[{{name}}]]) OR
     contains(file.tags, "{{name}}") OR
     regexmatch(file.text, "#{{name}}") OR
     regexmatch(file.text, "\\[\\[{{name}}(\\||\\]\\])"))
    AND (type != "Город" AND type != "Деревня")
    AND file.name != this.file.name
)
```
